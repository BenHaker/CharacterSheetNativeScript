"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var router_1 = require("@angular/router");
var dialogs_1 = require("ui/dialogs");
var datasource_1 = require("../data/datasource");
var ToolbarComponent = (function () {
    function ToolbarComponent(router, dataService) {
        var _this = this;
        this.router = router;
        this.dataService = dataService;
        this.characterTab = CharacterTab.Character;
        this.attributesTab = CharacterTab.Attributes;
        this.combatTab = CharacterTab.Combat;
        this.savesTab = CharacterTab.Saves;
        this.equipmentTab = CharacterTab.Equipment;
        this.treasureTab = CharacterTab.Treasure;
        this.spellbookTab = CharacterTab.Spellbook;
        this.spellslotsTab = CharacterTab.SpellSlots;
        this.skillsTab = CharacterTab.Skills;
        this.notesTab = CharacterTab.Notes;
        this.saveCharacter = function () {
            _this.dataService.saveData();
        };
        this.deleteCharacter = function () {
            var name = _this.character.characterName;
            dialogs_1.confirm("Are you sure you want to delete " + name + ". Once deleted " + name + " will be lost. Continue?")
                .then(function (result) {
                if (result == true)
                    _this.dataService.deleteCharacter(_this.character.id);
            });
        };
        this.back = function () {
            _this.router.navigate([""]);
        };
        this.navigate = function (moveTo) {
            switch (moveTo) {
                case CharacterTab.Character:
                    _this.router.navigate(["character"]);
                    break;
                case CharacterTab.Attributes:
                    _this.router.navigate(["attributes"]);
                    break;
                case CharacterTab.Combat:
                    _this.router.navigate(["combat"]);
                    break;
                case CharacterTab.Saves:
                    _this.router.navigate(["saves"]);
                    break;
                case CharacterTab.Spellbook:
                    _this.router.navigate(["spellbook"]);
                    break;
                case CharacterTab.SpellSlots:
                    _this.router.navigate(["spellslots"]);
                    break;
                case CharacterTab.Notes:
                    _this.router.navigate(["notes"]);
                    break;
            }
        };
    }
    ToolbarComponent.prototype.ngOnInit = function () {
        this.character = this.dataService.getSelectedCharacter();
    };
    ToolbarComponent.prototype.onIndexChanged = function (args) {
        var tmp = args.object;
        this.navigate(tmp.selectedIndex);
    };
    return ToolbarComponent;
}());
__decorate([
    core_1.Input(),
    __metadata("design:type", Number)
], ToolbarComponent.prototype, "currentLocation", void 0);
ToolbarComponent = __decorate([
    core_1.Component({
        selector: "Toolbar",
        template: "<ActionBar [title]=\"character.characterName\">\n                    <ActionItem (tap)=\"back()\" android.systemIcon=\"ic_menu_back\" android.position=\"actionBar\"></ActionItem>\n                    <ActionItem (tap)=\"saveCharacter()\" android.systemIcon=\"ic_menu_save\" android.position=\"actionBar\"></ActionItem>\n                    <ActionItem (tap)=\"deleteCharacter()\" android.systemIcon=\"ic_menu_delete\" android.position=\"actionBar\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(characterTab)\" text=\"Character\" android.position=\"popup\" visibility=\"{{ currentLocation == characterTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(attributesTab)\" text=\"Attributes\" android.position=\"popup\" visibility=\"{{ currentLocation == attributesTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(combatTab)\" text=\"Combat\" android.position=\"popup\" visibility=\"{{ currentLocation == combatTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(savesTab)\" text=\"Saves\" android.position=\"popup\" visibility=\"{{ currentLocation == savesTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(equipmentTab)\" text=\"Equipment\" android.position=\"popup\" visibility=\"{{ currentLocation == equipmentTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(treasureTab)\" text=\"Treasure\" android.position=\"popup\" visibility=\"{{ currentLocation == treasureTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(spellbookTab)\" text=\"Spell Book\" android.position=\"popup\" visibility=\"{{ currentLocation == spellbookTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(spellslotsTab)\" text=\"Spell Slots\" android.position=\"popup\" visibility=\"{{ currentLocation == spellslotsTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(skillsTab)\" text=\"Skills\" android.position=\"popup\" visibility=\"{{ currentLocation == skillsTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(notesTab)\" text=\"Notes & Journal\" android.position=\"popup\" visibility=\"{{ currentLocation == notesTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                </ActionBar>\n                <TabView class=\"tab-view\" [selectedIndex]=\"currentLocation\" (selectedIndexChange)=\"onIndexChanged($event)\" selectedColor=\"#FF0000\" iosIconRenderingMode=\"alwaysOriginal\" sdkExampleTitle sdkToggleNavButton>\n                    <StackLayout *tabItem=\"{title: 'Character'}\" ></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Attributes'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Combat'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Saves'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Equipment'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Treasure'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Spell Book'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Spell Slots'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Skills'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Notes & Journal'}\"></StackLayout>\n                </TabView>"
    }),
    __metadata("design:paramtypes", [router_1.Router, datasource_1.DataService])
], ToolbarComponent);
exports.ToolbarComponent = ToolbarComponent;
var CharacterTab;
(function (CharacterTab) {
    CharacterTab[CharacterTab["Character"] = 0] = "Character";
    CharacterTab[CharacterTab["Attributes"] = 1] = "Attributes";
    CharacterTab[CharacterTab["Combat"] = 2] = "Combat";
    CharacterTab[CharacterTab["Saves"] = 3] = "Saves";
    CharacterTab[CharacterTab["Equipment"] = 4] = "Equipment";
    CharacterTab[CharacterTab["Treasure"] = 5] = "Treasure";
    CharacterTab[CharacterTab["Spellbook"] = 6] = "Spellbook";
    CharacterTab[CharacterTab["SpellSlots"] = 7] = "SpellSlots";
    CharacterTab[CharacterTab["Skills"] = 8] = "Skills";
    CharacterTab[CharacterTab["Notes"] = 9] = "Notes";
})(CharacterTab = exports.CharacterTab || (exports.CharacterTab = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9vbGJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0b29sYmFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNDQUF5RDtBQUN6RCwwQ0FBeUM7QUFDekMsc0NBQXFDO0FBQ3JDLGlEQUE0RDtBQWtDNUQsSUFBYSxnQkFBZ0I7SUFDekIsMEJBQTJCLE1BQWMsRUFBVSxXQUF3QjtRQUEzRSxpQkFBZ0Y7UUFBckQsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUFVLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBR25FLGlCQUFZLEdBQUcsWUFBWSxDQUFDLFNBQVMsQ0FBQztRQUN0QyxrQkFBYSxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUM7UUFDeEMsY0FBUyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUM7UUFDaEMsYUFBUSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUM7UUFDOUIsaUJBQVksR0FBRyxZQUFZLENBQUMsU0FBUyxDQUFDO1FBQ3RDLGdCQUFXLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQztRQUNwQyxpQkFBWSxHQUFHLFlBQVksQ0FBQyxTQUFTLENBQUM7UUFDdEMsa0JBQWEsR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDO1FBQ3hDLGNBQVMsR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDO1FBQ2hDLGFBQVEsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDO1FBV3RDLGtCQUFhLEdBQUc7WUFDWixLQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2hDLENBQUMsQ0FBQTtRQUVELG9CQUFlLEdBQUc7WUFDZCxJQUFJLElBQUksR0FBVyxLQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQztZQUNoRCxpQkFBTyxDQUFDLGtDQUFrQyxHQUFHLElBQUksR0FBSSxpQkFBaUIsR0FBRyxJQUFJLEdBQUcsMEJBQTBCLENBQUM7aUJBQ2xHLElBQUksQ0FBQyxVQUFBLE1BQU07Z0JBQ1IsRUFBRSxD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YXIvY29yZVwiO1xyXG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiQGFuZ3VsYXIvcm91dGVyXCI7XHJcbmltcG9ydCB7IGNvbmZpcm0gfSBmcm9tIFwidWkvZGlhbG9nc1wiO1xyXG5pbXBvcnQgeyBDaGFyYWN0ZXIsIERhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vZGF0YS9kYXRhc291cmNlJztcclxuaW1wb3J0IHsgVGFiVmlldyB9IGZyb20gXCJ1aS90YWItdmlld1wiO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogXCJUb29sYmFyXCIsXHJcbiAgICB0ZW1wbGF0ZTogYDxBY3Rpb25CYXIgW3RpdGxlXT1cImNoYXJhY3Rlci5jaGFyYWN0ZXJOYW1lXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFjdGlvbkl0ZW0gKHRhcCk9XCJiYWNrKClcIiBhbmRyb2lkLnN5c3RlbUljb249XCJpY19tZW51X2JhY2tcIiBhbmRyb2lkLnBvc2l0aW9uPVwiYWN0aW9uQmFyXCI+PC9BY3Rpb25JdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25JdGVtICh0YXApPVwic2F2ZUNoYXJhY3RlcigpXCIgYW5kcm9pZC5zeXN0ZW1JY29uPVwiaWNfbWVudV9zYXZlXCIgYW5kcm9pZC5wb3NpdGlvbj1cImFjdGlvbkJhclwiPjwvQWN0aW9uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICA8QWN0aW9uSXRlbSAodGFwKT1cImRlbGV0ZUNoYXJhY3RlcigpXCIgYW5kcm9pZC5zeXN0ZW1JY29uPVwiaWNfbWVudV9kZWxldGVcIiBhbmRyb2lkLnBvc2l0aW9uPVwiYWN0aW9uQmFyXCI+PC9BY3Rpb25JdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25JdGVtICh0YXApPVwibmF2aWdhdGUoY2hhcmFjdGVyVGFiKVwiIHRleHQ9XCJDaGFyYWN0ZXJcIiBhbmRyb2lkLnBvc2l0aW9uPVwicG9wdXBcIiB2aXNpYmlsaXR5PVwie3sgY3VycmVudExvY2F0aW9uID09IGNoYXJhY3RlclRhYiA/ICdjb2xsYXBzZScgOiAndmlzaWJsZScgfX1cIj48L0FjdGlvbkl0ZW0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFjdGlvbkl0ZW0gKHRhcCk9XCJuYXZpZ2F0ZShhdHRyaWJ1dGVzVGFiKVwiIHRleHQ9XCJBdHRyaWJ1dGVzXCIgYW5kcm9pZC5wb3NpdGlvbj1cInBvcHVwXCIgdmlzaWJpbGl0eT1cInt7IGN1cnJlbnRMb2NhdGlvbiA9PSBhdHRyaWJ1dGVzVGFiID8gJ2NvbGxhcHNlJyA6ICd2aXNpYmxlJyB9fVwiPjwvQWN0aW9uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICA8QWN0aW9uSXRlbSAodGFwKT1cIm5hdmlnYXRlKGNvbWJhdFRhYilcIiB0ZXh0PVwiQ29tYmF0XCIgYW5kcm9pZC5wb3NpdGlvbj1cInBvcHVwXCIgdmlzaWJpbGl0eT1cInt7IGN1cnJlbnRMb2NhdGlvbiA9PSBjb21iYXRUYWIgPyAnY29sbGFwc2UnIDogJ3Zpc2libGUnIH19XCI+PC9BY3Rpb25JdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25JdGVtICh0YXApPVwibmF2aWdhdGUoc2F2ZXNUYWIpXCIgdGV4dD1cIlNhdmVzXCIgYW5kcm9pZC5wb3NpdGlvbj1cInBvcHVwXCIgdmlzaWJpbGl0eT1cInt7IGN1cnJlbnRMb2NhdGlvbiA9PSBzYXZlc1RhYiA/ICdjb2xsYXBzZScgOiAndmlzaWJsZScgfX1cIj48L0FjdGlvbkl0ZW0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFjdGlvbkl0ZW0gKHRhcCk9XCJuYXZpZ2F0ZShlcXVpcG1lbnRUYWIpXCIgdGV4dD1cIkVxdWlwbWVudFwiIGFuZHJvaWQucG9zaXRpb249XCJwb3B1cFwiIHZpc2liaWxpdHk9XCJ7eyBjdXJyZW50TG9jYXRpb24gPT0gZXF1aXBtZW50VGFiID8gJ2NvbGxhcHNlJyA6ICd2aXNpYmxlJyB9fVwiPjwvQWN0aW9uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICA8QWN0aW9uSXRlbSAodGFwKT1cIm5hdmlnYXRlKHRyZWFzdXJlVGFiKVwiIHRleHQ9XCJUcmVhc3VyZVwiIGFuZHJvaWQucG9zaXRpb249XCJwb3B1cFwiIHZpc2liaWxpdHk9XCJ7eyBjdXJyZW50TG9jYXRpb24gPT0gdHJlYXN1cmVUYWIgPyAnY29sbGFwc2UnIDogJ3Zpc2libGUnIH19XCI+PC9BY3Rpb25JdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25JdGVtICh0YXApPVwibmF2aWdhdGUoc3BlbGxib29rVGFiKVwiIHRleHQ9XCJTcGVsbCBCb29rXCIgYW5kcm9pZC5wb3NpdGlvbj1cInBvcHVwXCIgdmlzaWJpbGl0eT1cInt7IGN1cnJlbnRMb2NhdGlvbiA9PSBzcGVsbGJvb2tUYWIgPyAnY29sbGFwc2UnIDogJ3Zpc2libGUnIH19XCI+PC9BY3Rpb25JdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25JdGVtICh0YXApPVwibmF2aWdhdGUoc3BlbGxzbG90c1RhYilcIiB0ZXh0PVwiU3BlbGwgU2xvdHNcIiBhbmRyb2lkLnBvc2l0aW9uPVwicG9wdXBcIiB2aXNpYmlsaXR5PVwie3sgY3VycmVudExvY2F0aW9uID09IHNwZWxsc2xvdHNUYWIgPyAnY29sbGFwc2UnIDogJ3Zpc2libGUnIH19XCI+PC9BY3Rpb25JdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25JdGVtICh0YXApPVwibmF2aWdhdGUoc2tpbGxzVGFiKVwiIHRleHQ9XCJTa2lsbHNcIiBhbmRyb2lkLnBvc2l0aW9uPVwicG9wdXBcIiB2aXNpYmlsaXR5PVwie3sgY3VycmVudExvY2F0aW9uID09IHNraWxsc1RhYiA/ICdjb2xsYXBzZScgOiAndmlzaWJsZScgfX1cIj48L0FjdGlvbkl0ZW0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFjdGlvbkl0ZW0gKHRhcCk9XCJuYXZpZ2F0ZShub3Rlc1RhYilcIiB0ZXh0PVwiTm90ZXMgJiBKb3VybmFsXCIgYW5kcm9pZC5wb3NpdGlvbj1cInBvcHVwXCIgdmlzaWJpbGl0eT1cInt7IGN1cnJlbnRMb2NhdGlvbiA9PSBub3Rlc1RhYiA/ICdjb2xsYXBzZScgOiAndmlzaWJsZScgfX1cIj48L0FjdGlvbkl0ZW0+XHJcbiAgICAgICAgICAgICAgICA8L0FjdGlvbkJhcj5cclxuICAgICAgICAgICAgICAgIDxUYWJWaWV3IGNsYXNzPVwidGFiLXZpZXdcIiBbc2VsZWN0ZWRJbmRleF09XCJjdXJyZW50TG9jYXRpb25cIiAoc2VsZWN0ZWRJbmRleENoYW5nZSk9XCJvbkluZGV4Q2hhbmdlZCgkZXZlbnQpXCIgc2VsZWN0ZWRDb2xvcj1cIiNGRjAwMDBcIiBpb3NJY29uUmVuZGVyaW5nTW9kZT1cImFsd2F5c09yaWdpbmFsXCIgc2RrRXhhbXBsZVRpdGxlIHNka1RvZ2dsZU5hdkJ1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8U3RhY2tMYXlvdXQgKnRhYkl0ZW09XCJ7dGl0bGU6ICdDaGFyYWN0ZXInfVwiID48L1N0YWNrTGF5b3V0PlxyXG4gICAgICAgICAgICAgICAgICAgIDxTdGFja0xheW91dCAqdGFiSXRlbT1cInt0aXRsZTogJ0F0dHJpYnV0ZXMnfVwiPjwvU3RhY2tMYXlvdXQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPFN0YWNrTGF5b3V0ICp0YWJJdGVtPVwie3RpdGxlOiAnQ29tYmF0J31cIj48L1N0YWNrTGF5b3V0PlxyXG4gICAgICAgICAgICAgICAgICAgIDxTdGFja0xheW91dCAqdGFiSXRlbT1cInt0aXRsZTogJ1NhdmVzJ31cIj48L1N0YWNrTGF5b3V0PlxyXG4gICAgICAgICAgICAgICAgICAgIDxTdGFja0xheW91dCAqdGFiSXRlbT1cInt0aXRsZTogJ0VxdWlwbWVudCd9XCI+PC9TdGFja0xheW91dD5cclxuICAgICAgICAgICAgICAgICAgICA8U3RhY2tMYXlvdXQgKnRhYkl0ZW09XCJ7dGl0bGU6ICdUcmVhc3VyZSd9XCI+PC9TdGFja0xheW91dD5cclxuICAgICAgICAgICAgICAgICAgICA8U3RhY2tMYXlvdXQgKnRhYkl0ZW09XCJ7dGl0bGU6ICdTcGVsbCBCb29rJ31cIj48L1N0YWNrTGF5b3V0PlxyXG4gICAgICAgICAgICAgICAgICAgIDxTdGFja0xheW91dCAqdGFiSXRlbT1cInt0aXRsZTogJ1NwZWxsIFNsb3RzJ31cIj48L1N0YWNrTGF5b3V0PlxyXG4gICAgICAgICAgICAgICAgICAgIDxTdGFja0xheW91dCAqdGFiSXRlbT1cInt0aXRsZTogJ1NraWxscyd9XCI+PC9TdGFja0xheW91dD5cclxuICAgICAgICAgICAgICAgICAgICA8U3RhY2tMYXlvdXQgKnRhYkl0ZW09XCJ7dGl0bGU6ICdOb3RlcyAmIEpvdXJuYWwnfVwiPjwvU3RhY2tMYXlvdXQ+XHJcbiAgICAgICAgICAgICAgICA8L1RhYlZpZXc+YFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFRvb2xiYXJDb21wb25lbnQge1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsIHByaXZhdGUgZGF0YVNlcnZpY2U6IERhdGFTZXJ2aWNlKSB7IH1cclxuICAgIHByaXZhdGUgY2hhcmFjdGVyOiBDaGFyYWN0ZXI7XHJcbiAgICBASW5wdXQoKSBjdXJyZW50TG9jYXRpb246IENoYXJhY3RlclRhYjtcclxuICAgIHByaXZhdGUgY2hhcmFjdGVyVGFiID0gQ2hhcmFjdGVyVGFiLkNoYXJhY3RlcjtcclxuICAgIHByaXZhdGUgYXR0cmlidXRlc1RhYiA9IENoYXJhY3RlclRhYi5BdHRyaWJ1dGVzO1xyXG4gICAgcHJpdmF0ZSBjb21iYXRUYWIgPSBDaGFyYWN0ZXJUYWIuQ29tYmF0O1xyXG4gICAgcHJpdmF0ZSBzYXZlc1RhYiA9IENoYXJhY3RlclRhYi5TYXZlcztcclxuICAgIHByaXZhdGUgZXF1aXBtZW50VGFiID0gQ2hhcmFjdGVyVGFiLkVxdWlwbWVudDtcclxuICAgIHByaXZhdGUgdHJlYXN1cmVUYWIgPSBDaGFyYWN0ZXJUYWIuVHJlYXN1cmU7XHJcbiAgICBwcml2YXRlIHNwZWxsYm9va1RhYiA9IENoYXJhY3RlclRhYi5TcGVsbGJvb2s7XHJcbiAgICBwcml2YXRlIHNwZWxsc2xvdHNUYWIgPSBDaGFyYWN0ZXJUYWIuU3BlbGxTbG90cztcclxuICAgIHByaXZhdGUgc2tpbGxzVGFiID0gQ2hhcmFjdGVyVGFiLlNraWxscztcclxuICAgIHByaXZhdGUgbm90ZXNUYWIgPSBDaGFyYWN0ZXJUYWIuTm90ZXM7XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXIgPSB0aGlzLmRhdGFTZXJ2aWNlLmdldFNlbGVjdGVkQ2hhcmFjdGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25JbmRleENoYW5nZWQoYXJncykge1xyXG4gICAgICAgIGxldCB0bXAgPSA8VGFiVmlldz5hcmdzLm9iamVjdDtcclxuICAgICAgICB0aGlzLm5hdmlnYXRlKDxDaGFyYWN0ZXJUYWI+dG1wLnNlbGVjdGVkSW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVDaGFyYWN0ZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgdGhpcy5kYXRhU2VydmljZS5zYXZlRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNoYXJhY3RlciA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBsZXQgbmFtZTogc3RyaW5nID0gdGhpcy5jaGFyYWN0ZXIuY2hhcmFjdGVyTmFtZTtcclxuICAgICAgICBjb25maXJtKFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiArIG5hbWUgICsgXCIuIE9uY2UgZGVsZXRlZCBcIiArIG5hbWUgKyBcIiB3aWxsIGJlIGxvc3QuIENvbnRpbnVlP1wiKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQgPT0gdHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5kZWxldGVDaGFyYWN0ZXIodGhpcy5jaGFyYWN0ZXIuaWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYmFjayA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbXCJcIl0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5hdmlnYXRlID0gKG1vdmVUbzogQ2hhcmFjdGVyVGFiKTogdm9pZCA9PiB7XHJcbiAgICAgICAgc3dpdGNoKG1vdmVUbykge1xyXG4gICAgICAgICAgICBjYXNlIENoYXJhY3RlclRhYi5DaGFyYWN0ZXI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbXCJjaGFyYWN0ZXJcIl0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhcmFjdGVyVGFiLkF0dHJpYnV0ZXM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbXCJhdHRyaWJ1dGVzXCJdKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENoYXJhY3RlclRhYi5Db21iYXQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbXCJjb21iYXRcIl0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhcmFjdGVyVGFiLlNhdmVzOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW1wic2F2ZXNcIl0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhcmFjdGVyVGFiLlNwZWxsYm9vazpcclxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtcInNwZWxsYm9va1wiXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDaGFyYWN0ZXJUYWIuU3BlbGxTbG90czpcclxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtcInNwZWxsc2xvdHNcIl0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhcmFjdGVyVGFiLk5vdGVzOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW1wibm90ZXNcIl0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBDaGFyYWN0ZXJUYWIge1xyXG4gICAgQ2hhcmFjdGVyLFxyXG4gICAgQXR0cmlidXRlcyxcclxuICAgIENvbWJhdCxcclxuICAgIFNhdmVzLFxyXG4gICAgRXF1aXBtZW50LFxyXG4gICAgVHJlYXN1cmUsXHJcbiAgICBTcGVsbGJvb2ssXHJcbiAgICBTcGVsbFNsb3RzLFxyXG4gICAgU2tpbGxzLFxyXG4gICAgTm90ZXNcclxufSJdfQ==