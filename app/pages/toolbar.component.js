"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var router_1 = require("@angular/router");
var dialogs_1 = require("ui/dialogs");
var datasource_1 = require("../data/datasource");
var ToolbarComponent = (function () {
    function ToolbarComponent(router, dataService) {
        var _this = this;
        this.router = router;
        this.dataService = dataService;
        this.characterTab = CharacterTab.Character;
        this.attributesTab = CharacterTab.Attributes;
        this.combatTab = CharacterTab.Combat;
        this.savesTab = CharacterTab.Saves;
        this.equipmentTab = CharacterTab.Equipment;
        this.treasureTab = CharacterTab.Treasure;
        this.spellbookTab = CharacterTab.Spellbook;
        this.spellslotsTab = CharacterTab.SpellSlots;
        this.abilitiesTab = CharacterTab.Abilities;
        this.notesTab = CharacterTab.Notes;
        this.saveCharacter = function () {
            _this.dataService.saveData();
        };
        this.deleteCharacter = function () {
            var name = _this.character.characterName;
            dialogs_1.confirm("Are you sure you want to delete " + name + ". Once deleted " + name + " will be lost. Continue?")
                .then(function (result) {
                if (result == true) {
                    _this.dataService.deleteCharacter(_this.character.id);
                    _this.back();
                }
            });
        };
        this.back = function () {
            _this.router.navigate([""]);
        };
        this.navigate = function (moveTo) {
            switch (moveTo) {
                case CharacterTab.Character:
                    _this.router.navigate(["character"]);
                    break;
                case CharacterTab.Attributes:
                    _this.router.navigate(["attributes"]);
                    break;
                case CharacterTab.Combat:
                    _this.router.navigate(["combat"]);
                    break;
                case CharacterTab.Saves:
                    _this.router.navigate(["saves"]);
                    break;
                case CharacterTab.Spellbook:
                    _this.router.navigate(["spellbook"]);
                    break;
                case CharacterTab.SpellSlots:
                    _this.router.navigate(["spellslots"]);
                    break;
                case CharacterTab.Notes:
                    _this.router.navigate(["notes"]);
                    break;
                case CharacterTab.Equipment:
                    _this.router.navigate(["equipment"]);
                    break;
                case CharacterTab.Treasure:
                    _this.router.navigate(["treasure"]);
                    break;
                case CharacterTab.Abilities:
                    _this.router.navigate(["abilities"]);
                    break;
            }
        };
    }
    ToolbarComponent.prototype.ngOnInit = function () {
        this.character = this.dataService.getSelectedCharacter();
    };
    ToolbarComponent.prototype.onIndexChanged = function (args) {
        var tmp = args.object;
        this.navigate(tmp.selectedIndex);
    };
    return ToolbarComponent;
}());
__decorate([
    core_1.Input(),
    __metadata("design:type", Number)
], ToolbarComponent.prototype, "currentLocation", void 0);
ToolbarComponent = __decorate([
    core_1.Component({
        selector: "Toolbar",
        template: "<ActionBar [title]=\"character.characterName\">\n                    <ActionItem (tap)=\"back()\" android.systemIcon=\"ic_menu_back\" android.position=\"actionBar\"></ActionItem>\n                    <ActionItem (tap)=\"saveCharacter()\" android.systemIcon=\"ic_menu_save\" android.position=\"actionBar\"></ActionItem>\n                    <ActionItem (tap)=\"deleteCharacter()\" android.systemIcon=\"ic_menu_delete\" android.position=\"actionBar\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(characterTab)\" text=\"Character\" android.position=\"popup\" visibility=\"{{ currentLocation == characterTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(attributesTab)\" text=\"Attributes\" android.position=\"popup\" visibility=\"{{ currentLocation == attributesTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(combatTab)\" text=\"Combat\" android.position=\"popup\" visibility=\"{{ currentLocation == combatTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(savesTab)\" text=\"Saves\" android.position=\"popup\" visibility=\"{{ currentLocation == savesTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(equipmentTab)\" text=\"Equipment\" android.position=\"popup\" visibility=\"{{ currentLocation == equipmentTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(treasureTab)\" text=\"Treasure\" android.position=\"popup\" visibility=\"{{ currentLocation == treasureTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(spellbookTab)\" text=\"Spell Book\" android.position=\"popup\" visibility=\"{{ currentLocation == spellbookTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(spellslotsTab)\" text=\"Spell Slots\" android.position=\"popup\" visibility=\"{{ currentLocation == spellslotsTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(abilitiesTab)\" text=\"Abilities\" android.position=\"popup\" visibility=\"{{ currentLocation == abilitiesTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                    <ActionItem (tap)=\"navigate(notesTab)\" text=\"Notes & Journal\" android.position=\"popup\" visibility=\"{{ currentLocation == notesTab ? 'collapse' : 'visible' }}\"></ActionItem>\n                </ActionBar>\n                <TabView class=\"tab-view\" [selectedIndex]=\"currentLocation\" (selectedIndexChange)=\"onIndexChanged($event)\" selectedColor=\"#FF0000\" iosIconRenderingMode=\"alwaysOriginal\" sdkExampleTitle sdkToggleNavButton>\n                    <StackLayout *tabItem=\"{title: 'Character'}\" ></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Attributes'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Combat'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Saves'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Equipment'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Treasure'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Spell Book'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Spell Slots'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Abilities'}\"></StackLayout>\n                    <StackLayout *tabItem=\"{title: 'Notes & Journal'}\"></StackLayout>\n                </TabView>"
    }),
    __metadata("design:paramtypes", [router_1.Router, datasource_1.DataService])
], ToolbarComponent);
exports.ToolbarComponent = ToolbarComponent;
var CharacterTab;
(function (CharacterTab) {
    CharacterTab[CharacterTab["Character"] = 0] = "Character";
    CharacterTab[CharacterTab["Attributes"] = 1] = "Attributes";
    CharacterTab[CharacterTab["Combat"] = 2] = "Combat";
    CharacterTab[CharacterTab["Saves"] = 3] = "Saves";
    CharacterTab[CharacterTab["Equipment"] = 4] = "Equipment";
    CharacterTab[CharacterTab["Treasure"] = 5] = "Treasure";
    CharacterTab[CharacterTab["Spellbook"] = 6] = "Spellbook";
    CharacterTab[CharacterTab["SpellSlots"] = 7] = "SpellSlots";
    CharacterTab[CharacterTab["Abilities"] = 8] = "Abilities";
    CharacterTab[CharacterTab["Notes"] = 9] = "Notes";
})(CharacterTab = exports.CharacterTab || (exports.CharacterTab = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9vbGJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0b29sYmFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNDQUF5RDtBQUN6RCwwQ0FBeUM7QUFDekMsc0NBQXFDO0FBQ3JDLGlEQUE0RDtBQWtDNUQsSUFBYSxnQkFBZ0I7SUFDekIsMEJBQTJCLE1BQWMsRUFBVSxXQUF3QjtRQUEzRSxpQkFBZ0Y7UUFBckQsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUFVLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBR25FLGlCQUFZLEdBQUcsWUFBWSxDQUFDLFNBQVMsQ0FBQztRQUN0QyxrQkFBYSxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUM7UUFDeEMsY0FBUyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUM7UUFDaEMsYUFBUSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUM7UUFDOUIsaUJBQVksR0FBRyxZQUFZLENBQUMsU0FBUyxDQUFDO1FBQ3RDLGdCQUFXLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQztRQUNwQyxpQkFBWSxHQUFHLFlBQVksQ0FBQyxTQUFTLENBQUM7UUFDdEMsa0JBQWEsR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDO1FBQ3hDLGlCQUFZLEdBQUcsWUFBWSxDQUFDLFNBQVMsQ0FBQztRQUN0QyxhQUFRLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQztRQVd0QyxrQkFBYSxHQUFHO1lBQ1osS0FBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNoQyxDQUFDLENBQUE7UUFFRCxvQkFBZSxHQUFHO1lBQ2QsSUFBSSxJQUFJLEdBQVcsS0FBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUM7WUFDaEQsaUJBQU8sQ0FBQyxrQ0FBa0MsR0FBRyxJQUFJLEdBQUksaUJBQWlCLEdBQUcsSUFBSSxHQUFHLDBCQUEwQixDQUFDO2lCQUNsRyxJQUFJLENBQUMsVUFBQSxNQUFNO2dCQUNSLEVBQUUs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QUM7cUNBR3FDLGVBQU0sRUFBdUIsd0JBQVc7R0FEbEUsZ0JBQWdCLENBNkU1QjtBQTdFWSw0Q0FBZ0I7QUErRTdCLElBQVksWUFXWDtBQVhELFdBQVksWUFBWTtJQUNwQix5REFBUyxDQUFBO0lBQ1QsMkRBQVUsQ0FBQTtJQUNWLG1EQUFNLENBQUE7SUFDTixpREFBSyxDQUFBO0lBQ0wseURBQVMsQ0FBQTtJQUNULHVEQUFRLENBQUE7SUFDUix5REFBUyxDQUFBO0lBQ1QsMkRBQVUsQ0FBQTtJQUNWLHlEQUFTLENBQUE7SUFDVCxpREFBSyxDQUFBO0FBQ1QsQ0FBQyxFQVhXLFlBQVksR0FBWixvQkFBWSxLQUFaLG9CQUFZLFFBV3ZCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0IH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcIkBhbmd1bGFyL3JvdXRlclwiO1xyXG5pbXBvcnQgeyBjb25maXJtIH0gZnJvbSBcInVpL2RpYWxvZ3NcIjtcclxuaW1wb3J0IHsgQ2hhcmFjdGVyLCBEYXRhU2VydmljZSB9IGZyb20gJy4uL2RhdGEvZGF0YXNvdXJjZSc7XHJcbmltcG9ydCB7IFRhYlZpZXcgfSBmcm9tIFwidWkvdGFiLXZpZXdcIjtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6IFwiVG9vbGJhclwiLFxyXG4gICAgdGVtcGxhdGU6IGA8QWN0aW9uQmFyIFt0aXRsZV09XCJjaGFyYWN0ZXIuY2hhcmFjdGVyTmFtZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25JdGVtICh0YXApPVwiYmFjaygpXCIgYW5kcm9pZC5zeXN0ZW1JY29uPVwiaWNfbWVudV9iYWNrXCIgYW5kcm9pZC5wb3NpdGlvbj1cImFjdGlvbkJhclwiPjwvQWN0aW9uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICA8QWN0aW9uSXRlbSAodGFwKT1cInNhdmVDaGFyYWN0ZXIoKVwiIGFuZHJvaWQuc3lzdGVtSWNvbj1cImljX21lbnVfc2F2ZVwiIGFuZHJvaWQucG9zaXRpb249XCJhY3Rpb25CYXJcIj48L0FjdGlvbkl0ZW0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFjdGlvbkl0ZW0gKHRhcCk9XCJkZWxldGVDaGFyYWN0ZXIoKVwiIGFuZHJvaWQuc3lzdGVtSWNvbj1cImljX21lbnVfZGVsZXRlXCIgYW5kcm9pZC5wb3NpdGlvbj1cImFjdGlvbkJhclwiPjwvQWN0aW9uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICA8QWN0aW9uSXRlbSAodGFwKT1cIm5hdmlnYXRlKGNoYXJhY3RlclRhYilcIiB0ZXh0PVwiQ2hhcmFjdGVyXCIgYW5kcm9pZC5wb3NpdGlvbj1cInBvcHVwXCIgdmlzaWJpbGl0eT1cInt7IGN1cnJlbnRMb2NhdGlvbiA9PSBjaGFyYWN0ZXJUYWIgPyAnY29sbGFwc2UnIDogJ3Zpc2libGUnIH19XCI+PC9BY3Rpb25JdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25JdGVtICh0YXApPVwibmF2aWdhdGUoYXR0cmlidXRlc1RhYilcIiB0ZXh0PVwiQXR0cmlidXRlc1wiIGFuZHJvaWQucG9zaXRpb249XCJwb3B1cFwiIHZpc2liaWxpdHk9XCJ7eyBjdXJyZW50TG9jYXRpb24gPT0gYXR0cmlidXRlc1RhYiA/ICdjb2xsYXBzZScgOiAndmlzaWJsZScgfX1cIj48L0FjdGlvbkl0ZW0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFjdGlvbkl0ZW0gKHRhcCk9XCJuYXZpZ2F0ZShjb21iYXRUYWIpXCIgdGV4dD1cIkNvbWJhdFwiIGFuZHJvaWQucG9zaXRpb249XCJwb3B1cFwiIHZpc2liaWxpdHk9XCJ7eyBjdXJyZW50TG9jYXRpb24gPT0gY29tYmF0VGFiID8gJ2NvbGxhcHNlJyA6ICd2aXNpYmxlJyB9fVwiPjwvQWN0aW9uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICA8QWN0aW9uSXRlbSAodGFwKT1cIm5hdmlnYXRlKHNhdmVzVGFiKVwiIHRleHQ9XCJTYXZlc1wiIGFuZHJvaWQucG9zaXRpb249XCJwb3B1cFwiIHZpc2liaWxpdHk9XCJ7eyBjdXJyZW50TG9jYXRpb24gPT0gc2F2ZXNUYWIgPyAnY29sbGFwc2UnIDogJ3Zpc2libGUnIH19XCI+PC9BY3Rpb25JdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25JdGVtICh0YXApPVwibmF2aWdhdGUoZXF1aXBtZW50VGFiKVwiIHRleHQ9XCJFcXVpcG1lbnRcIiBhbmRyb2lkLnBvc2l0aW9uPVwicG9wdXBcIiB2aXNpYmlsaXR5PVwie3sgY3VycmVudExvY2F0aW9uID09IGVxdWlwbWVudFRhYiA/ICdjb2xsYXBzZScgOiAndmlzaWJsZScgfX1cIj48L0FjdGlvbkl0ZW0+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFjdGlvbkl0ZW0gKHRhcCk9XCJuYXZpZ2F0ZSh0cmVhc3VyZVRhYilcIiB0ZXh0PVwiVHJlYXN1cmVcIiBhbmRyb2lkLnBvc2l0aW9uPVwicG9wdXBcIiB2aXNpYmlsaXR5PVwie3sgY3VycmVudExvY2F0aW9uID09IHRyZWFzdXJlVGFiID8gJ2NvbGxhcHNlJyA6ICd2aXNpYmxlJyB9fVwiPjwvQWN0aW9uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICA8QWN0aW9uSXRlbSAodGFwKT1cIm5hdmlnYXRlKHNwZWxsYm9va1RhYilcIiB0ZXh0PVwiU3BlbGwgQm9va1wiIGFuZHJvaWQucG9zaXRpb249XCJwb3B1cFwiIHZpc2liaWxpdHk9XCJ7eyBjdXJyZW50TG9jYXRpb24gPT0gc3BlbGxib29rVGFiID8gJ2NvbGxhcHNlJyA6ICd2aXNpYmxlJyB9fVwiPjwvQWN0aW9uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICA8QWN0aW9uSXRlbSAodGFwKT1cIm5hdmlnYXRlKHNwZWxsc2xvdHNUYWIpXCIgdGV4dD1cIlNwZWxsIFNsb3RzXCIgYW5kcm9pZC5wb3NpdGlvbj1cInBvcHVwXCIgdmlzaWJpbGl0eT1cInt7IGN1cnJlbnRMb2NhdGlvbiA9PSBzcGVsbHNsb3RzVGFiID8gJ2NvbGxhcHNlJyA6ICd2aXNpYmxlJyB9fVwiPjwvQWN0aW9uSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICA8QWN0aW9uSXRlbSAodGFwKT1cIm5hdmlnYXRlKGFiaWxpdGllc1RhYilcIiB0ZXh0PVwiQWJpbGl0aWVzXCIgYW5kcm9pZC5wb3NpdGlvbj1cInBvcHVwXCIgdmlzaWJpbGl0eT1cInt7IGN1cnJlbnRMb2NhdGlvbiA9PSBhYmlsaXRpZXNUYWIgPyAnY29sbGFwc2UnIDogJ3Zpc2libGUnIH19XCI+PC9BY3Rpb25JdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBY3Rpb25JdGVtICh0YXApPVwibmF2aWdhdGUobm90ZXNUYWIpXCIgdGV4dD1cIk5vdGVzICYgSm91cm5hbFwiIGFuZHJvaWQucG9zaXRpb249XCJwb3B1cFwiIHZpc2liaWxpdHk9XCJ7eyBjdXJyZW50TG9jYXRpb24gPT0gbm90ZXNUYWIgPyAnY29sbGFwc2UnIDogJ3Zpc2libGUnIH19XCI+PC9BY3Rpb25JdGVtPlxyXG4gICAgICAgICAgICAgICAgPC9BY3Rpb25CYXI+XHJcbiAgICAgICAgICAgICAgICA8VGFiVmlldyBjbGFzcz1cInRhYi12aWV3XCIgW3NlbGVjdGVkSW5kZXhdPVwiY3VycmVudExvY2F0aW9uXCIgKHNlbGVjdGVkSW5kZXhDaGFuZ2UpPVwib25JbmRleENoYW5nZWQoJGV2ZW50KVwiIHNlbGVjdGVkQ29sb3I9XCIjRkYwMDAwXCIgaW9zSWNvblJlbmRlcmluZ01vZGU9XCJhbHdheXNPcmlnaW5hbFwiIHNka0V4YW1wbGVUaXRsZSBzZGtUb2dnbGVOYXZCdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPFN0YWNrTGF5b3V0ICp0YWJJdGVtPVwie3RpdGxlOiAnQ2hhcmFjdGVyJ31cIiA+PC9TdGFja0xheW91dD5cclxuICAgICAgICAgICAgICAgICAgICA8U3RhY2tMYXlvdXQgKnRhYkl0ZW09XCJ7dGl0bGU6ICdBdHRyaWJ1dGVzJ31cIj48L1N0YWNrTGF5b3V0PlxyXG4gICAgICAgICAgICAgICAgICAgIDxTdGFja0xheW91dCAqdGFiSXRlbT1cInt0aXRsZTogJ0NvbWJhdCd9XCI+PC9TdGFja0xheW91dD5cclxuICAgICAgICAgICAgICAgICAgICA8U3RhY2tMYXlvdXQgKnRhYkl0ZW09XCJ7dGl0bGU6ICdTYXZlcyd9XCI+PC9TdGFja0xheW91dD5cclxuICAgICAgICAgICAgICAgICAgICA8U3RhY2tMYXlvdXQgKnRhYkl0ZW09XCJ7dGl0bGU6ICdFcXVpcG1lbnQnfVwiPjwvU3RhY2tMYXlvdXQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPFN0YWNrTGF5b3V0ICp0YWJJdGVtPVwie3RpdGxlOiAnVHJlYXN1cmUnfVwiPjwvU3RhY2tMYXlvdXQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPFN0YWNrTGF5b3V0ICp0YWJJdGVtPVwie3RpdGxlOiAnU3BlbGwgQm9vayd9XCI+PC9TdGFja0xheW91dD5cclxuICAgICAgICAgICAgICAgICAgICA8U3RhY2tMYXlvdXQgKnRhYkl0ZW09XCJ7dGl0bGU6ICdTcGVsbCBTbG90cyd9XCI+PC9TdGFja0xheW91dD5cclxuICAgICAgICAgICAgICAgICAgICA8U3RhY2tMYXlvdXQgKnRhYkl0ZW09XCJ7dGl0bGU6ICdBYmlsaXRpZXMnfVwiPjwvU3RhY2tMYXlvdXQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPFN0YWNrTGF5b3V0ICp0YWJJdGVtPVwie3RpdGxlOiAnTm90ZXMgJiBKb3VybmFsJ31cIj48L1N0YWNrTGF5b3V0PlxyXG4gICAgICAgICAgICAgICAgPC9UYWJWaWV3PmBcclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBUb29sYmFyQ29tcG9uZW50IHtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIHJvdXRlcjogUm91dGVyLCBwcml2YXRlIGRhdGFTZXJ2aWNlOiBEYXRhU2VydmljZSkgeyB9XHJcbiAgICBwcml2YXRlIGNoYXJhY3RlcjogQ2hhcmFjdGVyO1xyXG4gICAgQElucHV0KCkgY3VycmVudExvY2F0aW9uOiBDaGFyYWN0ZXJUYWI7XHJcbiAgICBwcml2YXRlIGNoYXJhY3RlclRhYiA9IENoYXJhY3RlclRhYi5DaGFyYWN0ZXI7XHJcbiAgICBwcml2YXRlIGF0dHJpYnV0ZXNUYWIgPSBDaGFyYWN0ZXJUYWIuQXR0cmlidXRlcztcclxuICAgIHByaXZhdGUgY29tYmF0VGFiID0gQ2hhcmFjdGVyVGFiLkNvbWJhdDtcclxuICAgIHByaXZhdGUgc2F2ZXNUYWIgPSBDaGFyYWN0ZXJUYWIuU2F2ZXM7XHJcbiAgICBwcml2YXRlIGVxdWlwbWVudFRhYiA9IENoYXJhY3RlclRhYi5FcXVpcG1lbnQ7XHJcbiAgICBwcml2YXRlIHRyZWFzdXJlVGFiID0gQ2hhcmFjdGVyVGFiLlRyZWFzdXJlO1xyXG4gICAgcHJpdmF0ZSBzcGVsbGJvb2tUYWIgPSBDaGFyYWN0ZXJUYWIuU3BlbGxib29rO1xyXG4gICAgcHJpdmF0ZSBzcGVsbHNsb3RzVGFiID0gQ2hhcmFjdGVyVGFiLlNwZWxsU2xvdHM7XHJcbiAgICBwcml2YXRlIGFiaWxpdGllc1RhYiA9IENoYXJhY3RlclRhYi5BYmlsaXRpZXM7XHJcbiAgICBwcml2YXRlIG5vdGVzVGFiID0gQ2hhcmFjdGVyVGFiLk5vdGVzO1xyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2hhcmFjdGVyID0gdGhpcy5kYXRhU2VydmljZS5nZXRTZWxlY3RlZENoYXJhY3RlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSW5kZXhDaGFuZ2VkKGFyZ3MpIHtcclxuICAgICAgICBsZXQgdG1wID0gPFRhYlZpZXc+YXJncy5vYmplY3Q7XHJcbiAgICAgICAgdGhpcy5uYXZpZ2F0ZSg8Q2hhcmFjdGVyVGFiPnRtcC5zZWxlY3RlZEluZGV4KTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlQ2hhcmFjdGVyID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2Uuc2F2ZURhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDaGFyYWN0ZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgbGV0IG5hbWU6IHN0cmluZyA9IHRoaXMuY2hhcmFjdGVyLmNoYXJhY3Rlck5hbWU7XHJcbiAgICAgICAgY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIgKyBuYW1lICArIFwiLiBPbmNlIGRlbGV0ZWQgXCIgKyBuYW1lICsgXCIgd2lsbCBiZSBsb3N0LiBDb250aW51ZT9cIilcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5kZWxldGVDaGFyYWN0ZXIodGhpcy5jaGFyYWN0ZXIuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBiYWNrID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtcIlwiXSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmF2aWdhdGUgPSAobW92ZVRvOiBDaGFyYWN0ZXJUYWIpOiB2b2lkID0+IHtcclxuICAgICAgICBzd2l0Y2gobW92ZVRvKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhcmFjdGVyVGFiLkNoYXJhY3RlcjpcclxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtcImNoYXJhY3RlclwiXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDaGFyYWN0ZXJUYWIuQXR0cmlidXRlczpcclxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtcImF0dHJpYnV0ZXNcIl0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhcmFjdGVyVGFiLkNvbWJhdDpcclxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtcImNvbWJhdFwiXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDaGFyYWN0ZXJUYWIuU2F2ZXM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbXCJzYXZlc1wiXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDaGFyYWN0ZXJUYWIuU3BlbGxib29rOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW1wic3BlbGxib29rXCJdKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENoYXJhY3RlclRhYi5TcGVsbFNsb3RzOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW1wic3BlbGxzbG90c1wiXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDaGFyYWN0ZXJUYWIuTm90ZXM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbXCJub3Rlc1wiXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDaGFyYWN0ZXJUYWIuRXF1aXBtZW50OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW1wiZXF1aXBtZW50XCJdKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENoYXJhY3RlclRhYi5UcmVhc3VyZTpcclxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtcInRyZWFzdXJlXCJdKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENoYXJhY3RlclRhYi5BYmlsaXRpZXM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbXCJhYmlsaXRpZXNcIl0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBDaGFyYWN0ZXJUYWIge1xyXG4gICAgQ2hhcmFjdGVyLFxyXG4gICAgQXR0cmlidXRlcyxcclxuICAgIENvbWJhdCxcclxuICAgIFNhdmVzLFxyXG4gICAgRXF1aXBtZW50LFxyXG4gICAgVHJlYXN1cmUsXHJcbiAgICBTcGVsbGJvb2ssXHJcbiAgICBTcGVsbFNsb3RzLFxyXG4gICAgQWJpbGl0aWVzLFxyXG4gICAgTm90ZXNcclxufSJdfQ==